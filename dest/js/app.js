function registerHelperMethods(){Object.set=function(t,e,n){let i=e.split("."),s=i.length;for(let e=0;e<s-1;e++){let n=i[e];t[n]||(t[n]={}),t=t[n]}t[i[s-1]]=n},Object.get=function(t,e){let n=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".");for(let e=0,i=n.length;e<i;++e){let i=n[e];if(!(i in t))return;t=t[i]}return t},Object.delete=function(t,e){console.log(t);let n=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=t;for(let t=0;t<n.length-1;t++)void 0!==i&&(i=i[n[t]]?i[n[t]]:void 0);return void 0!==i&&delete i[n[n.length-1]],t},Handlebars.registerHelper("decimal",function(t){return parseFloat(Math.round(100*t)/100).toFixed(2)}),Handlebars.registerHelper("unixdate",function(t){let e=new Date(1e3*t);return`${e.getDate()} ${modules.clock.monthNames[e.getMonth()]}`}),Handlebars.registerHelper("kmh",function(t){return 3.6*t})}const SHORTCUTS=[{key:[82,50],ctrl:!1,allowedTags:[],func:function(){$("#nav-reddit").click()}},{key:[79,49],ctrl:!1,allowedTags:[],func:function(){$("#nav-other").click()}},{key:[84,51],ctrl:!1,allowedTags:[],func:function(){$("#nav-todo").click()}},{key:[192],ctrl:!1,allowedTags:["pre"],func:function(){if($("#terminal-container").slideToggle({queue:!1}),$("#terminal").is(":visible")){var t=$.Event("viewchanged");t.view="terminal",$(window).trigger(t),$("#input").focus()}}},{key:[27],ctrl:!1,allowedTags:[],func:function(){$(document.activeElement).blur(),$("#todo-datepicker").fadeOut(400)}},{key:[81],ctrl:!1,allowedTags:[],func:function(){$("#additional-other").slideToggle()}}],modules={viewHandler:{name:"viewHandler",runtime:0,run:function(){this.currentTab=$("#item-other"),$(document).on("click",".nav-item",t=>{let e=$("#"+$(t.target).data("id"));this.switchTabs(e)})},switchTabs:function(t){this.currentTab.hide(),t.show(),this.onViewChange(this.currentTab,t),this.currentTab=t},onViewChange:function(t,e){let n=$.Event("viewchanged");n.oldView=t.attr("id"),n.view=e.attr("id"),$(window).trigger(n)}},globalSettings:{name:"globalsettings",runtime:0,run:function(){window.settings=JSON.parse(localStorage.getItem("settings"))||{},window.settings.save=this.save,window.settings.set=this.set,window.settings.get=this.get,window.settings.delete=this.delete},save:function(){localStorage.setItem("settings",JSON.stringify(window.settings))},set:function(t,e){let n=this.get(t);Object.set(window.settings,t,e),window.settings.save(),modules.globalSettings.changed(t,n,e)},get:function(t){return Object.get(window.settings,t)},delete:function(t){let e=this.get(t);Object.delete(window.settings,t),window.settings.save(),modules.globalSettings.changed(t,e,null)},changed:function(t,e,n){let i=$.Event("settingschanged");i.setting=t,i.oldValue=e,i.newValue=n,$(window).trigger(i)}},shortcut:{name:"shortcut",runtime:0,run:function(){$(document).keydown(function(t){var e=t.target.tagName.toLowerCase(),n=["input","textarea","pre"],i=$.grep(SHORTCUTS,function(e){return e.key.indexOf(t.which)>-1})[0];i&&i.ctrl===t.ctrlKey&&(-1==n.indexOf(e)||i.allowedTags.indexOf(e)>-1)?(t.preventDefault(),i.func()):i&&27==i.key&&i.func()})},trigger:function(t,e=!1){var n=$.Event("keydown");n.which=t,n.target=document.querySelector("body"),n.ctrlKey=e,$(document).trigger(n)}},clock:{name:"clock",runtime:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],run:function(){this.startClock();let t=this;setInterval(function(){t.startClock()},5e3)},startClock:function(){let t=new Date,e=t.getHours(),n=t.getMinutes();n=this.checkZeroPadding(n),$("#time").html(e+":"+n),$("#date").html(this.formatDate(t))},checkZeroPadding:function(t){return t<10&&(t="0"+t),t},formatDate:function(t){let e=t.getDate(),n=t.getMonth(),i=t.getFullYear();return e+" "+this.monthNames[n]+" "+i}},notify:{name:"notify",runtime:0,active:0,idPrefix:"notif-",run:function(){},remove:function(t){$("#"+this.idPrefix+t).remove(),this.active--},msg:function(t,e=5e3,n=!1){let i=++this.active,s=$("#notification-template").html(),r=Handlebars.compile(s)({id:this.idPrefix+i,error:n,msg:t});$("#notifications").append(r),setTimeout(()=>{this.remove(i)},e)}},style:{name:"style",runtime:0,run:function(){$(window).on("settingschanged",t=>{t.setting.startsWith("css")&&this.reload()}),this.build()},build:function(){let t=window.settings.css||{};Object.values(t).map(t=>{this.add(t)})},add:function(t){$("#custom_rules").append(t)},reload:function(){$("#custom_rules").html(""),this.build()}},todo:{name:"todo",runtime:2,view:"item-todo",init:function(){this.ls=JSON.parse(localStorage.getItem("todo"))||[],this.ls.forEach((t,e)=>{if(t.due&&new Date(t.due)<Date.now()){let n=t.task&&t.task.length>50?t.task.substring(0,50)+"...":t.task;modules.notify.msg(`Todo item #${e+1} due: ${n}`)}})},run:function(){this.sort();let t=$("#todo-single-template").html(),e=Handlebars.compile(t);$.each(this.ls,function(t,n){n.index=t+1;var i=e(n);$("#item-todo").append(i)}),this.registerHandlers()},registerHandlers:function(){let t=this;$("#todo-input").on("keyup",t=>{if(13==t.keyCode){var e=$("#todo-input").val();this.add(e),$("#todo-input").val("")}}),$(document).on("click",".todo-editable",function(e){let n=$("<textarea>",{val:$(this).text(),rows:$(this).text().split("\n").length,focusout:function(e){if("focusout"==e.type){let e=$(this).val(),n=$(this).closest("div").attr("data-todo-id");t.edit(n,e);let i=$("<p></p>",{text:e,class:"todo-editable"});$(this).replaceWith(i)}}});$(this).replaceWith(n),n.select()}),$("#todo-datepicker .list li").click(t=>{let e=$("#todo-datepicker").attr("data-id");let n=this.ls.findIndex(t=>t.id==e);$("#todo-datepicker").fadeOut(400);let i=Number($(t.target).attr("data-value"));switch(i){case 0:delete this.ls[n].due;break;case 1:this.ls[n].due=new Date(Date.now()+144e5);break;case 2:this.ls[n].due=new Date(Date.now()+36e6);break;case 3:this.ls[n].due=new Date(Date.now()+864e5);break;case 4:this.ls[n].due=new Date(Date.now()+2592e5);break;case 5:this.ls[n].due=new Date(Date.now()+6048e5);break;default:modules.notify.msg("Something went wrong, no date set",5e3,!0)}this.ls[n].updated=new Date;this.save()}),$("#todo-datepicker").mouseleave(function(){$("#todo-datepicker").fadeOut(400)})},add:function(t){let e=this.ls[this.ls.length-1],n={id:e?e.id+1:1,task:t,done:!1,created:new Date};this.ls.push(n),this.save(),n.index=$(".todo-list-item").length+1;let i=$("#todo-single-template").html(),s=Handlebars.compile(i)(n);$("#item-todo").append(s)},remove:function(t){this.ls=this.ls.filter(function(e){return e.id!=t}),this.save(),$("div").find('[data-todo-id="'+t+'"]').remove(),this.fixIndexNumbers()},edit:function(t,e){let n=this.ls.findIndex(e=>e.id==t);this.ls[n].task=e,this.ls[n].updated=new Date,this.save()},toggleDone:function(t){let e=this.ls.findIndex(e=>e.id==t);this.ls[e].done=!this.ls[e].done,this.ls[e].updated=new Date,this.save();let n=$("div").find("[data-todo-id='"+t+"']").children("p");this.ls[e].done?n.addClass("done"):n.removeClass("done")},formatDueDateTime:function(t){let e=new Date,n=Math.abs(t-e)/1e3,i=Math.floor(n/86400);n-=86400*i;let s=Math.floor(n/3600)%24;return n-=3600*s,`Due in ${i} days, ${s} hours, ${Math.floor(n/60)%60} minutes`},showDatePicker:function(t,e){let n=t.offset(),i=this.ls.findIndex(t=>t.id==e);if($("#todo-current-due").html(""),this.ls[i].due){let t=new Date(this.ls[i].due);$("#todo-current-due").html(this.formatDueDateTime(t))}$("#todo-datepicker").attr("data-id",e),$("#todo-datepicker").fadeIn().css({left:Math.min(n.left,$(window).innerWidth()-$("#todo-datepicker").outerWidth())+29,top:n.top+t.innerHeight()-40})},sort(){this.ls=this.ls.sort(function(t,e){return t>e?1:e>t?-1:0})},save(){localStorage.setItem("todo",JSON.stringify(this.ls))},fixIndexNumbers:function(){$(".todo-list-item").each((t,e)=>{$(e).attr("data-todo-index",t+1)})}},weather:{name:"weather",runtime:0,apiKey:"74844c13dab753cea89eff23246f64b9",mainCity:"2759879",apiUrl:"http://api.openweathermap.org/data/2.5/",run:function(){this.weather=JSON.parse(localStorage.getItem("weather"))||{};let t=this.weather.chk_forecast?new Date(this.weather.chk_forecast):null,e=this.weather.chk_current?new Date(this.weather.chk_current):null,n=new Date;(!e||n-e>18e5)&&this.getCurrent(),(!t||n-t>36e5)&&this.getForecast(),$(window).on("settingschanged",t=>{"city"===t.setting&&(this.getCurrent(),this.getForecast())})},getUrl:function(t){let e={appid:this.apiKey,units:"metric",id:window.settings.city||this.mainCity};return this.apiUrl+t+"?"+Object.entries(e).map(t=>t[0]+"="+t[1]).join("&")},getCurrent:function(){$.ajax(this.getUrl("weather")).done(t=>{t.wind.direction=this.getWindDirection(t.wind.deg);this.weather.current=t;this.weather.chk_current=new Date;localStorage.setItem("weather",JSON.stringify(this.weather))}).catch(t=>{console.error(t)})},getForecast:function(){$.ajax(this.getUrl("forecast")).done(t=>{let e=(new Date).getDate()+1;let n={};t.list.forEach(t=>{let i=new Date(1e3*t.dt);let s=i.getDate();if(s>=e&&s<=e+2){let e=t.clouds.all,r=t.main.humidity,o=t.main.temp,a=t.main.temp_min,c=t.main.temp_max,l=t.wind.speed,h=t.wind.deg,u=t.weather[0].main;n[s]?(n[s].clouds+=e,n[s].humidity+=r,n[s].temp+=o,n[s].temp_min=n[s].temp_min<a?n[s].temp_min:a,n[s].temp_max=n[s].temp_max>c?n[s].temp_max:c,n[s].wind+=l,n[s].direction+=h,n[s].category.add(u),n[s].nr+=1):n[s]={clouds:e,humidity:r,temp:o,temp_min:a,temp_max:c,wind:l,direction:h,category:new Set([u]),nr:1,date:s+" "+modules.clock.monthNames[i.getMonth()]}}});let i=["clouds","humidity","temp","wind","direction"];for(let t in n){for(let e in n[t])i.indexOf(e)>-1?n[t][e]=n[t][e]/n[t].nr:"category"===e&&(n[t][e]=Array.from(n[t][e]).map(t=>t.toLowerCase()).join(", "));n[t].direction=this.getWindDirection(n[t].direction)}let s=Object.values(n);this.weather.forecast={name:t.city.name,forecast:s};this.weather.chk_forecast=new Date;localStorage.setItem("weather",JSON.stringify(this.weather))}).catch(t=>{console.error(t)})},getWindDirection:function(t){switch(!0){case t>348.75||t<=11.25:return"north";case t>11.25&&t<=33.75:return"north north east";case t>33.75&&t<=56.25:return"north east";case t>56.25&&t<=78.75:return"east north east";case t>78.75&&t<=101.25:return"east";case t>101.25&&t<=123.75:return"east south east";case t>123.75&&t<=146.25:return"south east";case t>146.25&&t<=168.75:return"south south east";case t>168.75&&t<=191.25:return"south";case t>191.25&&t<=213.75:return"south south west";case t>213.75&&t<=236.25:return"south west";case t>236.25&&t<=258.75:return"west south west";case t>258.75&&t<=281.25:return"west";case t>281.25&&t<=303.75:return"west north west";case t>303.75&&t<=326.25:return"north west";case t>326.25&&t<=348.75:return"north north west"}}},terminal:{name:"terminal",runtime:1,view:"terminal",matches:[],historyPos:-1,run:function(){this.init(),this.registerHandlers(),this.showPrompt()},init:function(){this.history=JSON.parse(localStorage.getItem("history"))||[],this.historyPos=-1},getName:function(){return window.settings.get("terminal.name")||"guest"},getMachine:function(){return window.settings.get("terminal.machine")||"guest"},showPrompt:function(){let t=this.getName()+"@"+this.getMachine()+" $ ";$("#terminal").append('<pre id="prompt" class="prompt">'+t+'</pre><pre id="input" class="term-input" contenteditable="true" autofocus="true" spellcheck="false"></pre><br/>'),$("#input").focus()},execute:function(t){t=t.trim(),$("#input").remove();let e=$("#prompt").text();if($("#prompt").replaceWith('<pre class="prompt old-input">'+e+t+"</pre>"),0===t.length)return void this.output("");let n=t.split(" "),i=n.shift(),s=term_modules[i];if(!s)return void this.output("Command '"+i+"' not found. Type 'help' for available commands.");s.methods&&s.methods.indexOf(n[0])>-1&&(i+=" "+n.shift(),s=term_modules[i]);let r=[],o="";for(let t=0;t<n.length;t++){if(!n[t].startsWith("-")){o=n.splice(t,n.length).join(" ");break}{let e=n[t].substr(1).split("");r+=e}}let a="";try{void 0===(a=s.run(o,r))?this.showPrompt():this.output(a)}catch(t){console.error(t),a='Something went wrong while executing the command: "'+t.message+'"',this.output(a)}this.updateHistory(t,i)},tabComplete:function(){let t=$("#input").text(),e=t.split(" ");this.matches.length>1?this.tabNext():term_modules[e[0]]?this.tabCompleteHistory(t):this.tabCompleteCommands(t)},tabCompleteHistory:function(t){this.matches=this.history.filter(function(e){return e.startsWith(t)}),this.matches.length>1&&(this.matches=this.matches.slice(0,10)),this.tabCompleteMatches()},tabCompleteCommands:function(t){for(let e in term_modules)term_modules[e].name.startsWith(t)&&this.matches.push(term_modules[e].name);this.tabCompleteMatches()},tabCompleteMatches:function(){if(1===this.matches.length)$("#input").text(this.matches[0]+" "),this.focus(),this.matches=[];else if(this.matches.length>1){var t=$("#terminal-ac-template").html(),e=Handlebars.compile(t)({matches:this.matches});$("#terminal").append(e)}},tabNext:function(){var t=$("#term-ac span.selected");t.removeClass("selected"),t.next().length?t.next().addClass("selected"):$("#term-ac span").first().addClass("selected"),this.focus()},tabSelect:function(){var t=$("#term-ac span.selected").text();$("#input").text(t+" "),$("#term-ac").remove(),this.focus(),this.matches=[]},focus:function(){$("#input").focus(),this.caretAtEnd()},registerHandlers:function(){$("#terminal").keydown(t=>{9===t.which&&(t.preventDefault(),this.tabComplete())}),$(document).on("keypress","#input",t=>{13==t.which&&(t.preventDefault(),this.matches.length>0?this.tabSelect():this.execute($("#input").text()));$("#term-ac").remove();this.matches=[]}),$(document).keydown(t=>{switch(t.which){case 38:this.historyPrev();break;case 40:this.historyNext()}}),$("#terminal-container").click(t=>{if("pre"===t.target.tagName.toLowerCase())return;this.focus()})},output:function(t="",e=!0){"object"==typeof t&&(t=JSON.stringify(t));let n=`<pre class="output" style="white-space:initial;">${t}</pre><br/>`;t.split("\n").length>1&&(n=`<pre class="output">${t}</pre><br/>`),$("#terminal").append(n),e&&this.showPrompt()},updateHistory:function(t,e){if("restore"==e)return;let n=this.history.indexOf(t);n>-1&&this.history.splice(n,1),this.history.unshift(t),this.historyPos=-1,this.history.length,window.settings.maxhistory,this.history.slice(0,window.settings.maxhistory||1e3),localStorage.setItem("history",JSON.stringify(this.history))},historyNext:function(){this.historyPos-=1,-1===this.historyPos?$("#input").text(""):$("#input").text(this.history[this.historyPos]),this.focus()},historyPrev:function(){this.historyPos+=1,this.historyPos!==this.history.length-1&&($("#input").text(this.history[this.historyPos]),this.focus())},caretAtEnd:function(){var t=document.getElementById("input");if(0!==t.innerHTML.length){var e=t.firstChild,n=$("#input").text().length,i=document.createRange();i.setStart(e,n),i.setEnd(e,n);var s=window.getSelection();s.removeAllRanges(),s.addRange(i)}}}},term_modules={echo:{name:"echo",category:"general",help:"display a line of text\nusage: echo STRING",visible:!0,run:function(t){return t}},clear:{name:"clear",category:"general",help:"clear the terminal",visible:!0,run:function(){$("#terminal").html("")}},help:{name:"help",category:"general",help:"display program's help text\nusage: help [MODULE]",visible:!0,run:function(t){if(""===t){var e={};Object.entries(term_modules).forEach(([t,n])=>{if(!n.visible)return;e[n.category]?e[n.category]+=" > "+n.name:e[n.category]="> "+n.name});var n="";return Object.entries(e).forEach(([t,e])=>{n+="<b>"+t+"</b>\n"+e+"\n"}),n.substr(0,n.length-1)}var i=term_modules[t];return i?i.help:"Unknown module '"+t+"'."}},set:{name:"set",category:"general",help:"change homepage settings\nusage: set SETTING [VALUE]\nif no value is given, the setting will be deleted.\nexample: set terminal.name example",visible:!0,run:function(t){let e=t.split(" ");switch(e.length){case 1:window.settings.delete(e[0]);break;case 2:window.settings.set(e[0],e[1]);break;default:let t=e.splice(1,e.length).join(" ");window.settings.set(e[0],t)}}},get:{name:"get",category:"general",help:"get value of a setting\nusage: get SETTING\nexample: get terminal.name",visible:!0,run:function(t){if(""===t)return window.settings;try{let e=window.settings.get(t);return void 0===e?"This setting does not exist / has no value":e}catch(t){return this.help()}}},history:{name:"history",category:"general",help:"display (filtered) command history\nusage: history [-l LIMIT] [QUERY]",visible:!0,run:function(t,e=[]){let n=e.indexOf("l")>-1,i=0,s=modules.terminal.history.slice(0);if(n)try{t=t.split(" "),i=Number(t[0]),t.shift(),t=t.join(" ")}catch(t){return console.log(t),"Invalid `limit` parameter; not a number."}if(""===t)return s.slice(0-i).join("\n");let r=$.grep(s,function(e){return e.indexOf(t)>-1});return(r=r.slice(0-i)).join("\n")}},keycode:{name:"keycode",category:"programs",help:"return js keycodes for given string\nusage: keycode [-s SOURCE] [-n NUMPAD] INPUT",visible:!0,keycodes:{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},numpad:{0:96,1:97,2:98,3:99,4:100,5:101,6:102,7:103,8:104,9:105},run:function(t,e=[]){if(""===t)return this.help();let n=e.indexOf("s")>-1,i=e.indexOf("n")>-1;return this.which(t,n,i)},which:function(t,e=!1,n=!1){let i="";t=t.replace(/ /g,"").toLowerCase();for(let s=0;s<t.length;s++){let r=this.keycodes[t[s]];n&&(r=this.numpad[t[s]]?this.numpad[t[s]]:r),i+=e?t[s]+":"+r+" ":r+" "}return i.trim()}},backup:{name:"backup",category:"general",help:"make backup of localstorage\nusage: backup [-c COPY] [ITEM]\nexample: backup | backup settings",visible:!0,run:function(t){if(""!==t){let e=JSON.parse(localStorage.getItem(t));if(null===e)return`Item '${t}' not found.`;let n={};return n[t]=e,JSON.stringify(n)}let e={};return Object.keys(localStorage).forEach(t=>{e[t]=JSON.parse(localStorage.getItem(t))}),JSON.stringify(e)}},restore:{name:"restore",category:"general",help:"restore localstorage from json\nusage: restore DATA",visible:!0,run:function(t){let e={};try{e=JSON.parse(t)}catch(t){return"Failed to parse JSON."}Object.entries(e).forEach(([t,e])=>{localStorage.setItem(t,JSON.stringify(e))}),modules.terminal.init()}},search:{name:"search",category:"programs",help:"search the web for a string.\nusage: search [OPTION] QUERY",visible:!0,se:{y:"https://www.youtube.com/results?search_query=",w:"https://en.wikipedia.org/w/index.php?search=",d:"https://duckduckgo.com/?q=",g:"https://www.google.com/search?q="},run:function(t,e=["g"]){if(""===t)return this.searchEngineHelp();let n=t.replace(" ","+");this.se[e[0]]?window.location=this.se[e[0]]+n:window.location=this.se.g+n},searchEngineHelp:function(){let t=/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:(?:www|en)\.)?([^:\/\n.]+)/im,e=this.help+"\npossible search options:\n";return Object.entries(this.se).forEach(([n,i])=>{e+="  -"+n+":"+t.exec(i)[1]+"\n"}),e.substr(0,e.length-1)}},bm:{name:"bm",category:"programs",help:"navigate to a bookmark\nusage: bm NAME\npossible methods: set | remove | list\nenter `help bm method` to see help for a method.",visible:!0,methods:["set","remove","list"],run:function(t){if(""===t)return this.help;let e=(JSON.parse(localStorage.getItem("bookmarks"))||{})[t];return e?(window.location=e,`Navigating to ${t}`):"Bookmark not found"}},"bm set":{name:"bm set",category:"programs",help:"set a bookmark\nusage: bm set NAME LINK",visible:!1,run:function(t){let e=t.split(" ");if(2!=e.length)return this.help;let n=JSON.parse(localStorage.getItem("bookmarks"))||{};n[e[0]]=e[1],localStorage.setItem("bookmarks",JSON.stringify(n))}},"bm remove":{name:"bm remove",category:"programs",help:"remove a bookmark\nusage: bm remove NAME",visible:!1,run:function(t){if(""===t)return this.help;let e=JSON.parse(localStorage.getItem("bookmarks"))||{};return delete e[t],localStorage.setItem("bookmarks",JSON.stringify(e)),e[t]?`removed bookmark '${t}' (${e[t]})`:void 0}},"bm list":{name:"bm list",category:"programs",help:"list all bookmarks\nusage: bm list",visible:!1,run:function(t){let e=JSON.parse(localStorage.getItem("bookmarks"))||{},n="";return Object.entries(e).forEach(([t,e])=>{n+=`> <a href="${e}">${t}</a>`}),n}},chan:{name:"chan",category:"programs",help:"navigate to (a) 4chan (board)\nusage: chan [BOARD]",visible:!0,url:"http://4chan.org",run:function(t){return""===t?(window.location=this.url,"Navigating to 4chan home"):(t.startsWith("/")||(t="/"+t),window.location=this.url+t,`Navigating to 4chan ${t}`)}},reddit:{name:"reddit",category:"programs",help:"navigate to (a) reddit (sub)\nusage: reddit [r/SUB | u/USER]",visible:!0,url:"https://reddit.com/",run:function(t){return""===t&&(window.location=this.url),t.startsWith("/")&&(t=t.substring(1,t.legnth)),window.location=this.url+t,`Navigating to reddit ${t}`}},notify:{name:"notify",category:"general",help:'show a notification\nusage: notify MESSAGE [;DURATION] [;ERROR]\nduration: integer in miliseconds | error: "true" | "false"\nexample: notify Hello World!;5000;true',visible:!0,run:function(t){console.log(t);let e=t.split(";"),n=e[0],i=e[1]?Number(e[1]):5e3,s=e[2]&&"true"==e[2];modules.notify.msg(n,i,s)}},weather:{name:"weather",category:"programs",help:"get the weather, current or forecast\nusage: weather [-f]",visible:!0,run:function(t,e=[]){return e.indexOf("f")>-1?this.getForecast():this.getCurrent()},getCurrent:function(){let t=$("#weather-current-template").html();return Handlebars.compile(t)(modules.weather.weather.current).trim()},getForecast:function(){let t=$("#weather-forecast-template").html();return Handlebars.compile(t)(modules.weather.weather.forecast).trim()}},lastfm:{name:"lastfm",category:"programs",help:"go to band or tag on last.fm\nusage: lastfm [-t] QUERY",visible:!0,bandUrl:"http://last.fm/music/",tagUrl:"http://last.fm/tag/",run:function(t,e=[]){return t=t.replace(" ","+"),e.indexOf("t")>-1?this.toTag(t):this.toBand(t)},toBand:function(t){return window.location=`${this.bandUrl}${t}`,`navigating to last.fm - ${t}`},toTag:function(t){return window.location=`${this.tagUrl}${t}`,`navigating to last.fm - ${t}`}}};$(document).ready(function(){"use strict";registerHelperMethods();var t={};Object.entries(modules).forEach(([e,n])=>{switch(n.runtime){case 0:n.run();break;case 1:t[n.view]=e;break;case 2:n.init(),t[n.view]=e}}),$(window).on("viewchanged",e=>{let n=t[e.view];n&&(delete t[e.view],modules[n].run())}),$(document).on("input","textarea",function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"})});